import{s as S,a as I,A as F}from"./AuthenticatedLayout-_E8msa5o.js";import{h as $,_ as M}from"./http-helper-7HKkKYeF.js";import{_ as b}from"./Checkbox-16AlpGuJ.js";import{_ as B}from"./ConfirmationDialog-D88GlSFa.js";import{Q as V,T as A,r as u,o as m,f as v,b as t,d as w,a as i,F as y,h as j,m as D,p as N,c as q,w as L,q as O,g as E,n as T,t as C}from"./app-0jD_U881.js";import"./ApplicationLogo-kOi6OoIv.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./SecondaryButton-DOSrhAGb.js";import"./TextInput-owTTohJd.js";import"./PrimaryButton--FYT-SEj.js";import"./DangerButton-NVg_iRUd.js";const U=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})],-1),P={__name:"RestoreFilesButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["restore"],setup(f,{emit:a}){V();const e=A({all:null,ids:[],parent_id:null}),r=u(!1),n=f,o=a;function d(){if(!n.allSelected&&!n.selectedIds.length){S("Please select at least one file to restore");return}r.value=!0}function p(){r.value=!1}function h(){n.allSelected?e.all=!0:e.ids=n.selectedIds,e.post(route("file.restore"),{onSuccess:()=>{r.value=!1,o("restore"),I("Selected files have been restored")}})}return(_,x)=>(m(),v(y,null,[t("button",{onClick:d,class:"inline-flex items-center px-3 py-3 text-sm font-medium text-gray-900"},[U,w(" Restore ")]),i(B,{show:r.value,message:"Are you sure you want to restore selected files?",onCancel:p,onConfirm:h},null,8,["show"])],64))}},R=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),z={__name:"DeleteForeverButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["delete"],setup(f,{emit:a}){V();const e=A({all:null,ids:[],parent_id:null}),r=u(!1),n=f,o=a;function d(){if(!n.allSelected&&!n.selectedIds.length){S("Please select at least one file to delete");return}r.value=!0}function p(){r.value=!1}function h(){n.allSelected?(e.all=!0,e.ids=[]):e.ids=n.selectedIds,e.delete(route("file.deleteForever"),{onSuccess:()=>{r.value=!1,o("delete"),I("Selected files have been deleted forever")}})}return(_,x)=>(m(),v(y,null,[t("button",{onClick:d,class:"inline-flex items-center px-3 py-3 text-sm font-medium text-gray-900"},[R,w(" Delete Forever ")]),i(B,{show:r.value,message:"Are you sure you want to delete selected files?",onCancel:p,onConfirm:h},null,8,["show"])],64))}},G={class:"flex items-center justify-end p-1 mb-3"},H={class:"flex-1 overflow-auto"},Q={class:"min-w-full"},J={class:"bg-gray-200 border-b"},K={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},W=t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),X=t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),Y=["onClick"],Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},le={key:0,class:"py-8 text-center text-sm text-gray-400"},pe={__name:"Trash",props:{files:Object,folder:Object,ancestors:Object},setup(f){const a=u(!1),e=u({}),r=u(null),n=f,o=u({data:n.files.data,next:n.files.links.next}),d=j(()=>Object.entries(e.value).filter(l=>l[1]).map(l=>l[0]));function p(){console.log("load more"),console.log(o.value.next),o.value.next!==null&&$(o.value.next).then(l=>{o.value.data=[...o.value.data,...l.data],o.value.next=l.links.next})}function h(){o.value.data.forEach(l=>{e.value[l.id]=a.value})}function _(l){e.value[l.id]=!e.value[l.id],x(l)}function x(l){if(!e.value[l.id])a.value=!1;else{let c=!0;for(let s of o.value.data)if(!e.value[s.id]){c=!1;break}a.value=c}}function k(){a.value=!1,e.value={}}return D(()=>{o.value={data:n.files.data,next:n.files.links.next}}),N(()=>{new IntersectionObserver(c=>c.forEach(s=>s.isIntersecting&&p()),{rootMargin:"-250px 0px 0px 0px"}).observe(r.value)}),(l,c)=>(m(),q(F,null,{default:L(()=>[t("nav",G,[t("div",null,[i(z,{"all-selected":a.value,"selected-ids":d.value,onDelete:k},null,8,["all-selected","selected-ids"]),i(P,{"all-selected":a.value,"selected-ids":d.value,onRestore:k},null,8,["all-selected","selected-ids"])])]),t("div",H,[t("table",Q,[t("thead",J,[t("tr",null,[t("th",K,[i(b,{onChange:h,checked:a.value,"onUpdate:checked":c[0]||(c[0]=s=>a.value=s)},null,8,["checked"])]),W,X])]),t("tbody",null,[(m(!0),v(y,null,O(o.value.data,s=>(m(),v("tr",{key:s.id,onClick:g=>_(s),class:T(["border-b transition duration-300 ease-in-out hover:bg-blue-50 cursor-pointer",e.value[s.id]||a.value?"bg-blue-100":"bg-gray"])},[t("td",Z,[i(b,{onChange:g=>x(s),modelValue:e.value[s.id],"onUpdate:modelValue":g=>e.value[s.id]=g,checked:e.value[s.id]||a.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),t("td",ee,[i(M,{file:s},null,8,["file"]),w(" "+C(s.name),1)]),t("td",te,C(s.path),1)],10,Y))),128))])]),o.value.data.length?E("",!0):(m(),v("div",le," There is no file in this folder ")),t("div",{ref_key:"loadMoreIntersect",ref:r},null,512)])]),_:1}))}};export{pe as default};
