import{o as s,f as o,F as _,u as d,b as t,c as C,w as x,t as f,d as h,a as u,Q as E,T as M,j as g,h as I,k as V,l as O,m as F,g as z,i as j,n as S,O as L}from"./app-YJo5UV_X.js";import{s as T,A as Z}from"./AuthenticatedLayout-w_0z5l25.js";import{_ as A}from"./Checkbox-psk8_zTI.js";import{_ as N,a as P}from"./SecondaryButton-2yvDDWbI.js";import{D as U}from"./DangerButton-HM4oJ5xd.js";import"./ApplicationLogo-4g5Bzagb.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./TextInput-3MKF02JC.js";import"./PrimaryButton-fNjrcujU.js";function q(e){return/^image\/\w+$/.test(e.mime)}function H(e){return["application/pdf","application/x-pdf","application/acrobat","application/vnd.pdf","text/pdf","text/x-pdf"].includes(e.mime)}function G(e){return["audio/mpeg","audio/ogg","audio/wav","audio/x-m4a","audion/webm"].includes(e.mime)}function Q(e){return["video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm"].includes(e.mime)}function W(e){return["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"].includes(e.mime)}function J(e){return["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.openxmlformats-officedocument.presentationml.slide"].includes(e.mime)}function K(e){return["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12"].includes(e.mime)}function R(e){return["application/zip"].includes(e.mime)}function X(e){return["text/plain","text/html","text/css","text/javascript","text/csv"].includes(e.mime)}const Y={class:"w-6 h-6 inline-flex items-center justify-center mr-2"},ee={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},te=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"},null,-1),le=[te],se=["src"],ne=["src"],ae=["src"],oe=["src"],ie=["src"],ce=["src"],re=["src"],de=["src"],me=["src"],ue=["src"],pe={__name:"FileIcon",props:{file:Object},setup(e){return(c,i)=>(s(),o("span",Y,[e.file.is_folder?(s(),o("svg",ee,le)):(s(),o(_,{key:1},[d(q)(e.file)?(s(),o("img",{key:0,class:"max-w-full",src:"/images/icons/image.png"},null,8,se)):d(G)(e.file)?(s(),o("img",{key:1,class:"max-w-full",src:"/images/icons/volume.png"},null,8,ne)):d(H)(e.file)?(s(),o("img",{key:2,class:"max-w-full",src:"/images/icons/pdf.png"},null,8,ae)):d(Q)(e.file)?(s(),o("img",{key:3,class:"max-w-full",src:"/images/icons/montage.png"},null,8,oe)):d(W)(e.file)?(s(),o("img",{key:4,class:"max-w-full",src:"/images/icons/word.png"},null,8,ie)):d(K)(e.file)?(s(),o("img",{key:5,class:"max-w-full",src:"/images/icons/excel.png"},null,8,ce)):d(R)(e.file)?(s(),o("img",{key:6,class:"max-w-full",src:"/images/icons/zip.png"},null,8,re)):d(X)(e.file)?(s(),o("img",{key:7,class:"max-w-full",src:"/images/icons/txt-file.png"},null,8,de)):d(J)(e.file)?(s(),o("img",{key:8,class:"max-w-full",src:"/images/icons/ppt.png"},null,8,me)):(s(),o("img",{key:9,class:"max-w-full",src:"/images/icons/attach-file.png"},null,8,ue))],64))]))}};function fe(e){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(c=>c.json())}const xe={class:"p-6"},he=t("h2",{class:"text-2xl mb-2 font-semibold"}," Please Confirm ",-1),ge={class:"mt-6 flex justify-end"},ve={__name:"ConfirmationDialog",props:{show:Boolean,message:String},emits:["cancel","confirm"],setup(e,{emit:c}){const i=c;return(m,r)=>(s(),C(P,{show:e.show,"max-width":"md"},{default:x(()=>[t("div",xe,[he,t("p",null,f(e.message),1),t("div",ge,[u(N,{onClick:r[0]||(r[0]=a=>i("cancel"))},{default:x(()=>[h("Cancel")]),_:1}),u(U,{class:"ml-3",onClick:r[1]||(r[1]=a=>i("confirm"))},{default:x(()=>[h(" Confirm ")]),_:1})])])]),_:1},8,["show"]))}},_e=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6"},[t("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})],-1),we={__name:"DeleteFilesButton",props:{deleteAll:{type:Boolean,required:!1,default:!1},deleteIds:{type:Array,required:!1}},emits:["delete"],setup(e,{emit:c}){const i=E(),m=M({all:null,ids:[],parent_id:null}),r=g(!1),a=e,w=c;function y(){if(!a.deleteAll&&!a.deleteIds.length){T("Please select at least one file to delete");return}r.value=!0}function k(){r.value=!1}function b(){m.parent_id=i.props.folder.id,a.deleteAll?m.all=!0:m.ids=a.deleteIds,m.delete(route("file.delete"),{onSuccess:()=>{r.value=!1,w("delete")}}),console.log("Delete",a.deleteAll,a.deleteIds)}return(D,$)=>(s(),o(_,null,[t("button",{onClick:y,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"},[_e,h(" Delete ")]),u(ve,{show:r.value,message:"Are you sure to delete the selected files?",onCancel:k,onConfirm:b},null,8,["show"])],64))}},ye={class:"flex items-center justify-between p-1 mb-3"},ke={class:"inline-flex items-center space-x-1 md:space-x-3"},be=t("svg",{"aria-hidden":"true",class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:`M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001
                                       1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l
                                       .293.293a1 1 0 001.414-1.414l-7-7z`})],-1),$e={key:1,class:"flex items-center"},Ce=t("svg",{"aria-hidden":"true",class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:`0 0 20
                             20`,xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:`M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1
                                       1 0 010 1.414l-4 4a1 1 0 01-1.414 0z`,"clip-rule":"evenodd"})],-1),De={class:"flex-2 overflow-auto"},Fe={class:"min-w-full"},je={class:"bg-gray-100 border-b"},Ae={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] mx-w-[30px] pr-0"},Be=t("th",{class:"text-sm font-medium text-gray-400-900 px-6 py-4 text-left"}," Name ",-1),Ee=t("th",{class:"text-sm font-medium text-gray-400-900 px-6 py-4 text-left"}," Owner ",-1),Me=t("th",{class:"text-sm font-medium text-gray-400-900 px-6 py-4 text-left"}," Last Modified ",-1),Ie=t("th",{class:"text-sm font-medium text-gray-400-900 px-6 py-4 text-left"}," Size ",-1),Ve=["onClick","onDblclick"],Oe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] mx-w-[30px] pr-0"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},Se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ze={key:0,class:"py-8 text-center text-lg text-gray-600"},Ke={__name:"MyFiles",props:{files:Object,folder:Object,ancestors:Object},setup(e){const c=g(!1),i=g({}),m=g(null),r=e,a=g({data:r.files.data,next:r.files.links.next}),w=I(()=>Object.entries(i.value).filter(n=>n[1]).map(n=>n[0]));function y(n){n.is_folder&&L.visit(route("myFiles",{folder:n.path}))}function k(){console.log("load more"),console.log(a.value.next),a.value.next!==null&&fe(a.value.next).then(n=>{a.value.data=[...a.value.data,...n.data],a.value.next=n.links.next})}function b(){a.value.data.forEach(n=>{i.value[n.id]=c.value})}function D(n){i.value[n.id]=!i.value[n.id],$(n)}function $(n){if(!i.value[n.id])c.value=!1;else{let p=!0;for(let l of a.value.data)if(!i.value[l.id]){p=!1;break}c.value=p}}function B(){c.value=!1,i.value={}}return V(()=>{a.value={data:r.files.data,next:r.files.links.next}}),O(()=>{new IntersectionObserver(p=>p.forEach(l=>l.isIntersecting&&k()),{rootMargin:"-250px 0px 0px 0px"}).observe(m.value)}),(n,p)=>(s(),C(Z,null,{default:x(()=>[t("nav",ye,[t("ol",ke,[(s(!0),o(_,null,F(e.ancestors.data,l=>(s(),o("li",{key:l.id,class:"inline-flex items-center"},[l.parent_id?(s(),o("div",$e,[Ce,u(d(j),{href:n.route("myFiles",{folder:l.path}),class:"ml-1 text-sm font-medium text-gray-800 hover:text-blue-600 md:ml-4 dark:text-gray-600 dark:hover:text-blue"},{default:x(()=>[h(f(l.name),1)]),_:2},1032,["href"])])):(s(),C(d(j),{key:0,href:n.route("myFiles"),class:"inline-flex items-center text-sm font-medium text-gray-600 hover:text-blue-600 dark:text-gray-600 dark:hover:text-blue"},{default:x(()=>[be,h(" My Files ")]),_:1},8,["href"]))]))),128))]),t("div",null,[u(we,{"delete-all":c.value,"delete-ids":w.value,onDelete:B},null,8,["delete-all","delete-ids"])])]),t("div",De,[t("table",Fe,[t("thead",je,[t("tr",null,[t("th",Ae,[u(A,{onChange:b,checked:c.value,"onUpdate:checked":p[0]||(p[0]=l=>c.value=l)},null,8,["checked"])]),Be,Ee,Me,Ie])]),t("tbody",null,[(s(!0),o(_,null,F(a.value.data,l=>(s(),o("tr",{key:l.id,onClick:v=>D(l),onDblclick:v=>y(l),class:S(["border-b transition duration-300 ease-in-out hover:bg-green-100 cursor-pointer",i.value[l.id]||c.value?"bg-green-50":"bg-white"])},[t("td",Oe,[u(A,{onChange:v=>$(l),modelValue:i.value[l.id],"onUpdate:modelValue":v=>i.value[l.id]=v,checked:i.value[l.id]||c.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),t("td",ze,[u(pe,{file:l},null,8,["file"]),h(" "+f(l.name),1)]),t("td",Se,f(l.owner),1),t("td",Le,f(l.updated_at),1),t("td",Te,f(l.size),1)],42,Ve))),128))])]),a.value.data.length?z("",!0):(s(),o("div",Ze," There is no file in this folder ")),t("div",{ref_key:"loadMoreIntersect",ref:m},null,512)])]),_:1}))}};export{Ke as default};
